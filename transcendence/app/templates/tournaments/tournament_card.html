<div class="tournament-card" style="border: 1px solid #ccc; padding: 15px; border-radius: 8px; background: white; box-shadow: 0 0 10px rgba(0,0,0,0.1);">
    <h3>{{ tournament.name }}</h3>
    <p><strong>Estado:</strong> {{ tournament.get_status_display }}</p>
    <p><strong>Máximo de Jugadores:</strong> {{ tournament.max_participants }}</p>
    <p><strong>Jugadores Registrados:</strong> {{ tournament.participants.count }}/{{ tournament.max_participants }}</p>

    <!-- Lista de jugadores inscritos -->
    <p><strong>Participantes:</strong></p>
    <ul>
        {% for participant in tournament.participants.all %}
            <li>{{ participant.display_name }}</li>
        {% empty %}
            <li>Aún no hay jugadores inscritos.</li>
        {% endfor %}
    </ul>

    <!-- Si el torneo ha finalizado, mostrar el ganador -->
    {% if tournament.status == "finalizado" and tournament.winner %}
        <p><strong>Ganador:</strong> 🏆 {{ tournament.winner.display_name }}</p>
    {% endif %}

    <!-- Botón para Unirse o Salir -->
    {% if tournament.status == "inscripcion" %}
        {% if request.user in tournament.participants.all %}
            <button 
                hx-post="{% url 'leave_tournament' tournament.id %}"
                hx-target="closest .tournament-card"
                hx-swap="outerHTML"
                style="background-color: #dc3545; color: white; padding: 8px 12px; border: none; border-radius: 5px; cursor: pointer;">
                ❌ Salir del Torneo
            </button>
        {% else %}
            <button 
                hx-post="{% url 'join_tournament' tournament.id %}"
                hx-target="closest .tournament-card"
                hx-swap="outerHTML"
                style="background-color: #28a745; color: white; padding: 8px 12px; border: none; border-radius: 5px; cursor: pointer;">
                ✅ Unirse al Torneo
            </button>
        {% endif %}
    {% endif %}
</div>
